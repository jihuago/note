## 生成器

php在php5.5后提供了生成器。

生成器提供了一种更容易的方法来实现简单的<a href="http://php.net/manual/zh/language.oop5.iterations.php">对象迭代(遍历对象)</a>,相比较定义了实现Iterator接口的方式，性能开销和复杂性大大降低。

生成器允许在foreach代码块中写代码来迭代一组数据而不需要在内存中创建一个数组，因为创建数组会使内存达到上限，或者会占据处理时间。

相反，你可以写一个生成器函数，就像一个普通的自定义函数一样，和普通函数只返回一次不同的是，生成器可以根据需要yield多次，以便生成需要迭代的值。

一个简单的例子就是使用生成器来重新实现range()函数。标准的range()函数需要在内存中生成一个数组包含每一个在它范围内的值，然后返回该数组，结果就是会产生一个很大的数组。比如，调用range(0, 100000)将导致内存占用超过100MB。

作为一种替代方法，我们可以实现一个xrange()生成器，只需要足够的内存来创建Iterator对象并在内部跟踪生成器当前状态，这样只需要不到1K字节的内容。

### 生成器语法

一个生成器函数看起来像一个普通的函数，不同的是普通函数返回一个值，而一个生成器可以yield生成许多它需要的值。

当一个生成器被调用的时候，它返回一个可以被遍历的对象，当你遍历这个对象的时候，PHP将会在每次需要值得时候调用生成器函数，并在产生一个值之后保存生成器的状态，这样它就可以在需要产生下一个值的时候恢复调用状态。

一旦不需要产生更多的值，生成器函数可以简单退出，而调用生成器的代码还可以继续执行，就像一个数组已经被遍历完了。


* 注意

一个生成器不可以返回值：这样做会产生一个编译错误。然而return null是一个有效的语法并且它将会终止生成器继续执行。

